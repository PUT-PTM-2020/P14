<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Weather Station</title>

  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <style>
    html {
      scroll-behavior: smooth;
    }
  </style>

</head>

<body class="bg-secondary">

  <section id="top">
    <nav class="navbar navbar-dark bg-dark flex-column">
      <a class="h1 text-white">Weather Station</a>
      <a class="nav-link h5" href="#data">data</a>
      <a class="nav-link h5" href="#about">about</a>
      <a class="nav-link h5" href="#authors">authors</a>
    </nav>
    </div>
  </section>

  <div class="my-5"></div>

  <section id="data">
    <div class="container-fluid">
      <div class="jumbotron jumbotron-fluid">
        <div class="container">
          <h1 class="display-4 text-center">Current weather</h1>

          <div class="my-5"></div>

          <div class="container text-center">
            <div class="row">
              <p id="data_tem" class="col-md-3 mb-3" style="display: none;">1</p>
              <p id="data_hum" class="col-md-3 mb-3" style="display: none;">2</p>
              <p id="data_dat" class="col-md-3 mb-3" style="display: none;">3</p>
              <p id="data_tim" class="col-md-3 mb-3" style="display: none;">4</p>
            </div>
          </div>
          <div class="d-flex justify-content-center">
            <div id="spinner" class="spinner-grow" role="status">
              <span class="sr-only">Loading data...</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script type="text/javascript">

    setTimeout(() => {
      var url = window.location.href + 'now';

      fetch(url)
        .then((res) => res.json())
        .then(obj => {
          document.getElementById('data_tem').innerHTML = "Temperature: " + obj.temp + ' C';
          document.getElementById('data_hum').innerHTML = "Humidity: " + obj.hum + ' %';
          document.getElementById('data_dat').innerHTML = "Measured on: " + obj.date;
          document.getElementById('data_tim').innerHTML = "At: " + obj.time;

          document.getElementById('spinner').style.display = 'none';

          document.getElementById('data_tem').style.display = 'block';
          document.getElementById('data_hum').style.display = 'block';
          document.getElementById('data_dat').style.display = 'block';
          document.getElementById('data_tim').style.display = 'block';
        })
        .catch(e => console.log(e));
    }, 3000);

  </script>

  <div class="my-5"></div>

  <section id="authors">
    <h4 class="text-white text-center m-0">About</h4>
    <hr class="my-4">
    <p class="lead text-white text-center">The site is used to operate the home weather station.<br> You can check the
      weather from anywhere in your home using your phone or computer.</p>
  </section>

  <div class="my-5"></div>

  <section id="authors">
    <h4 class="text-white text-center m-0">Authors</h4>
    <hr class="my-4">

    <div class="container">
      <div class="row">

        <div class="col-md-6 mb-3">
          <div class="card bg-dark">
            <div class="card-body text-center">
              <h4 class="m-0 text-white">Bartosz Kosmala</h4>
              <hr class="my-4">
              <a class="text-secondary-50" href="https://github.com/bart-kosmala">@github</a>
            </div>
          </div>
        </div>

        <div class="col-md-6  mb-3">
          <div class="card bg-dark">
            <div class="card-body text-center">
              <h4 class="m-0 text-white">Hubert Knio≈Ça</h4>
              <hr class="my-4">
              <a class="text-secondary-50" href="https://github.com/hubert-kniola">@github</a>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <div class="my-2"></div>

  <footer class="bg-black small text-center text-white-50">
    <div class="container">
      2020 @ PUT
    </div>
  </footer>

  <div class="my-2"></div>

</body>

</html>